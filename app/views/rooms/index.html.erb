<div class="container my-3">
  <div class="row gy-4 room-card">
    <% @rooms.each do |room| %>
      <div class="col-12 col-md-6 col-lg-4">
        <%= link_to room_path(room), class: "text-decoration-none" do %>
          <div class="card h-100 shadow bg-body rounded-5" style="overflow: hidden;">
            <div class="room-image text-center">
              <div id="carouselExampleFade-<%= room.id %>" class="carousel slide carousel-fade">
                <div class="carousel-inner">
                  <% rand_num = rand(3) %>
                  <% ["bedroom.jpg", "bathtub.jpg", "toilet.jpg"].each_with_index do |image, index| %>
                    <div class="carousel-item <%= "active" if index == rand_num %>" >
                      <%= image_tag(image, class: "d-block w-100",
                            style: "object-fit: cover;", alt: "#{room.name}'s image #{index + 1}") %>
                    </div>
                  <% end %>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade-<%= room.id %>" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade-<%= room.id %>" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            </div>
            <div class="room-name text-center">
              <h4 class="mt-3 mx-2 mb-0"><strong><%= room.name %></strong></h4>
            </div>
            <div class="room-info col-12 col-md-12 col-lg-12 mt-3 mb-2 px-3">
              <div class="description mb-3">
                <p class="text-center mb-0"><%= room.description %></p>
              </div>
              <% unless room.room_type == "C" %>
                <div class="row mb-3">
                  <div class="col-3 d-flex justify-content-start align-items-center pe-0">
                    <%= image_tag("money.png", class: "me-2",
                            style: "width: 20px;", alt: "Price icon") %>
                    <p class="mb-0">Â¥<%=  number_with_delimiter(room.price_per_night) %></p>
                  </div>
                  <div class="col-4 d-flex justify-content-center align-items-center px-0">
                    <%= image_tag("capacity.png", class: "me-2",
                              style: "width: 20px;", alt: "Capacity icon") %>
                    <p class="mb-0"><%= room.capacity %> guests</p>
                  </div>
                  <div class="col-5 d-flex justify-content-center align-items-center px-0">
                    <%= image_tag("sofa-bed.png", class: "me-2",
                            style: "width: 20px;", alt: "Sofa bed icon") %>
                    <p class="mb-0"><%= room.sofa_bed %> <%= room.sofa_bed == 1 ? "sofa bed" : "sofa bed".pluralize%></p>
                  </div>
                </div>
              <% end %>
              <!--Render beds depending on bed types-->
              <%= render "rooms/beds", room: room %>
              <!---->
              <div class="d-flex align-items-start mb-3">
                <%= image_tag("tv.png", class: "me-2",
                            style: "width: 20px;", alt: "TV icon") %>
                <p class="mb-0"><%= room.amenities %></p>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
